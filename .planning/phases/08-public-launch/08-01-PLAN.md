---
phase: 08-public-launch
plan: 01
type: execute
---

<objective>
Polish UX and create comprehensive documentation for public launch.

Purpose: Prepare Percepta for public users by improving CLI user experience, error messages, and creating complete documentation covering installation, getting started, examples, and API reference. Ship to 200 paying users with production-ready polish.

Output: Production-ready CLI with excellent UX + comprehensive documentation ready for public launch.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-code-generation-engine/07-02-SUMMARY.md
@docs/Percepta_full.md

**From Phase 7:**
- Code generation working end-to-end
- CLI commands: observe, assert, diff, device, knowledge, style-check, generate
- All core functionality operational
- Tests passing (33 tests total)

**Phase 8 Goal:**
Ship to 200 paying users with "Better than Embedder" positioning

**UX Polish scope:**
- Error messages clear and actionable
- Help text comprehensive and example-rich
- Progress indicators for long operations
- Validation feedback user-friendly
- Edge case handling (missing deps, invalid configs)

**Documentation scope:**
- Installation guide (Linux/macOS/Windows)
- Getting started tutorial
- Command reference (all commands)
- Example workflows (common use cases)
- Configuration guide (config.yaml)
- API integration guide (MCP server mode)
- Troubleshooting guide

**From PRD (Part VI, Phase 2C):**
- CLI refinement
- Error message improvements
- Documentation (20+ example specs)
- Demo videos (5 different use cases) - deferred to 08-02

**Ready state:**
- All commands functional
- Documentation framework exists (docs/)
- Alpha release notes written
</context>

<tasks>

<task type="auto">
  <name>Task 1: Polish CLI UX and error handling</name>
  <files>cmd/percepta/*.go, internal/*/errors.go, cmd/percepta/help.go</files>
  <action>
Improve CLI user experience across all commands:

**Error Messages:**

Create consistent error types:
```go
// internal/errors/user_errors.go

type UserError struct {
    Message     string
    Suggestion  string
    DocsURL     string
}

func (e *UserError) Error() string {
    return fmt.Sprintf("%s\n\nSuggestion: %s\nDocs: %s", e.Message, e.Suggestion, e.DocsURL)
}

// Common error constructors
func MissingAPIKey(service string) error {
    return &UserError{
        Message:    fmt.Sprintf("%s API key not set", service),
        Suggestion: fmt.Sprintf("Set %s_API_KEY environment variable or add to ~/.config/percepta/config.yaml", strings.ToUpper(service)),
        DocsURL:    "https://github.com/Perceptax/percepta/blob/main/docs/configuration.md#api-keys",
    }
}

func DeviceNotFound(deviceID string) error {
    return &UserError{
        Message:    fmt.Sprintf("Device '%s' not found in config", deviceID),
        Suggestion: "Run 'percepta device list' to see available devices or 'percepta device add' to add a new one",
        DocsURL:    "https://github.com/Perceptax/percepta/blob/main/docs/getting-started.md#device-setup",
    }
}

func InvalidBoardType(board string) error {
    return &UserError{
        Message:    fmt.Sprintf("Unknown board type '%s'", board),
        Suggestion: "Supported boards: esp32, stm32, arduino, generic. See docs for full list.",
        DocsURL:    "https://github.com/Perceptax/percepta/blob/main/docs/supported-boards.md",
    }
}
```

**Progress Indicators:**

Add spinner for long operations:
```go
// internal/ui/spinner.go

type Spinner struct {
    message string
    done    chan bool
}

func NewSpinner(message string) *Spinner {
    s := &Spinner{message: message, done: make(chan bool)}
    go s.spin()
    return s
}

func (s *Spinner) spin() {
    frames := []string{"⠋", "⠙", "⠹", "⠸", "⠼", "⠴", "⠦", "⠧", "⠇", "⠏"}
    i := 0
    for {
        select {
        case <-s.done:
            return
        default:
            fmt.Printf("\r%s %s", frames[i], s.message)
            i = (i + 1) % len(frames)
            time.Sleep(80 * time.Millisecond)
        }
    }
}

func (s *Spinner) Stop(success bool) {
    s.done <- true
    if success {
        fmt.Printf("\r✓ %s\n", s.message)
    } else {
        fmt.Printf("\r✗ %s\n", s.message)
    }
}
```

**Update all commands to use spinners:**
- `percepta observe` - "Capturing frames from camera..."
- `percepta generate` - "Generating code with Claude..."
- `percepta knowledge store` - "Storing validated pattern..."

**Help Text Improvements:**

Enhance help for all commands with examples:
```go
// cmd/percepta/observe.go

var observeCmd = &cobra.Command{
    Use:   "observe <device>",
    Short: "Observe hardware state via computer vision",
    Long: `Capture and analyze hardware behavior using vision.

Percepta uses your camera to observe LED states, display content, and boot
behavior. Observations are stored in SQLite for diffing and assertions.

Examples:
  # Observe device with default camera
  percepta observe my-esp32

  # Observe with specific camera
  percepta observe my-esp32 --camera /dev/video0

  # Observe for 10 seconds
  percepta observe my-esp32 --duration 10s

  # Save observation to file
  percepta observe my-esp32 --output observation.json`,
    RunE: runObserve,
}
```

Apply similar improvements to all commands:
- observe, assert, diff, device, knowledge, style-check, generate

**Validation Feedback:**

Improve validation messages across all commands:
- Clear success/failure indicators (✓/✗)
- Actionable suggestions on failure
- Links to relevant docs
- "What to do next" guidance

**Edge Cases:**

Handle edge cases gracefully:
```go
// Missing config file
if !configExists() {
    fmt.Println("No config found. Creating default config at ~/.config/percepta/config.yaml")
    createDefaultConfig()
}

// No devices configured
if len(cfg.Devices) == 0 {
    fmt.Println("No devices configured yet.")
    fmt.Println("\nRun 'percepta device add' to add your first device:")
    fmt.Println("  percepta device add my-board --camera /dev/video0")
    os.Exit(0)
}

// Camera not found
if !cameraExists(device.Camera) {
    return fmt.Errorf("camera %s not found\n\nCheck available cameras:\n  ls /dev/video*", device.Camera)
}
```

Write tests for error handling:
- Missing API keys
- Device not found
- Invalid board types
- Missing camera
- Config file issues

AVOID: Technical jargon in user-facing errors. Use plain language.
AVOID: Errors without suggestions. Always tell user what to do next.
  </action>
  <verify>All commands have clear errors, spinners work, help text is comprehensive, edge cases handled</verify>
  <done>CLI UX polished, error messages actionable, progress indicators working, help text comprehensive</done>
</task>

<task type="auto">
  <name>Task 2: Create comprehensive documentation</name>
  <files>docs/README.md, docs/installation.md, docs/getting-started.md, docs/commands.md, docs/examples.md, docs/configuration.md, docs/troubleshooting.md, docs/api-integration.md</files>
  <action>
Create complete documentation suite for public users:

**docs/installation.md:**
```markdown
# Installation

## Prerequisites
- Go 1.23+ (for building from source)
- Camera (built-in or USB webcam)
- Optional: ANTHROPIC_API_KEY for code generation
- Optional: OPENAI_API_KEY for semantic search

## Install from Binary (Recommended)

### Linux
\`\`\`bash
curl -fsSL https://github.com/Perceptax/percepta/releases/latest/download/percepta-linux-amd64 -o /usr/local/bin/percepta
chmod +x /usr/local/bin/percepta
\`\`\`

### macOS
\`\`\`bash
curl -fsSL https://github.com/Perceptax/percepta/releases/latest/download/percepta-darwin-amd64 -o /usr/local/bin/percepta
chmod +x /usr/local/bin/percepta
\`\`\`

### Windows
Download from [releases](https://github.com/Perceptax/percepta/releases/latest) and add to PATH.

## Build from Source
\`\`\`bash
git clone https://github.com/Perceptax/percepta.git
cd percepta
./build.sh
sudo mv percepta /usr/local/bin/
\`\`\`

## Verify Installation
\`\`\`bash
percepta --version
# Output: percepta version 1.0.0
\`\`\`
```

**docs/getting-started.md:**
```markdown
# Getting Started

## 1. Add Your First Device

\`\`\`bash
percepta device add my-esp32 --camera /dev/video0
\`\`\`

Check available cameras:
\`\`\`bash
ls /dev/video*
\`\`\`

## 2. Observe Hardware Behavior

\`\`\`bash
percepta observe my-esp32
\`\`\`

You'll see:
- LED states (ON/OFF, blinking frequency, color)
- Display content (LCD text)
- Signal confidence scores

## 3. Assert Expected Behavior

Create assertions to validate firmware:
\`\`\`bash
percepta assert my-esp32 "led power is ON" "led power blinks at 1Hz"
\`\`\`

## 4. Compare Firmware Versions

Tag current firmware:
\`\`\`bash
percepta device set-firmware my-esp32 v1.0
\`\`\`

Flash new firmware, then compare:
\`\`\`bash
percepta device set-firmware my-esp32 v1.1
percepta diff my-esp32 --from v1.0 --to v1.1
\`\`\`

## 5. Generate Code (AI)

Set API key:
\`\`\`bash
export ANTHROPIC_API_KEY=sk-ant-...
\`\`\`

Generate firmware:
\`\`\`bash
percepta generate "Blink LED at 1Hz" --board esp32 --output blink.c
\`\`\`

## Next Steps
- [Command Reference](commands.md) - All commands
- [Examples](examples.md) - Common workflows
- [Configuration](configuration.md) - Advanced config
```

**docs/commands.md:**
```markdown
# Command Reference

## percepta observe

Observe hardware state via computer vision.

**Usage:**
\`\`\`bash
percepta observe <device> [flags]
\`\`\`

**Flags:**
- `--duration` - Observation duration (default: 5s)
- `--camera` - Override device camera
- `--output` - Save to JSON file

**Examples:**
\`\`\`bash
# Basic observation
percepta observe my-board

# Extended observation
percepta observe my-board --duration 30s

# Save observation
percepta observe my-board --output obs.json
\`\`\`

## percepta assert
[... document all commands ...]
```

**docs/examples.md:**
```markdown
# Example Workflows

## Example 1: Validate LED Blink Rate

\`\`\`bash
# 1. Observe current behavior
percepta observe my-esp32

# 2. Assert expected blink rate
percepta assert my-esp32 "led status blinks at 2Hz"

# Output: ✓ Assertion passed
\`\`\`

## Example 2: Detect Boot Regression

\`\`\`bash
# Before firmware update
percepta device set-firmware my-board v1.0

# After firmware update
percepta device set-firmware my-board v1.1

# Compare behavior
percepta diff my-board --from v1.0 --to v1.1

# Output shows any signal changes (boot time, LED patterns, etc.)
\`\`\`

## Example 3: Generate Validated Firmware

\`\`\`bash
# 1. Generate code
percepta generate "Toggle LED on button press" --board esp32 --output toggle.c

# 2. Flash to hardware (your build process)
pio run --target upload

# 3. Validate behavior
percepta observe my-esp32
percepta assert my-esp32 "led toggles when button pressed"

# 4. Store pattern if validated
percepta knowledge store toggle.c --spec "Toggle LED on button press" --board esp32 --device my-esp32
\`\`\`

[... 20+ more examples covering all use cases ...]
```

**docs/configuration.md:**
```markdown
# Configuration

Config file: `~/.config/percepta/config.yaml`

## Example Config

\`\`\`yaml
devices:
  my-esp32:
    camera: /dev/video0
    firmware: v1.2.0

  lab-stm32:
    camera: /dev/video2
    firmware: v2.0.1

api_keys:
  anthropic: sk-ant-...
  openai: sk-...

vision:
  frames: 5
  interval: 200ms
  confidence_threshold: 0.7

storage:
  path: ~/.local/share/percepta/percepta.db

knowledge:
  path: ~/.local/share/percepta/knowledge.db
\`\`\`

[... document all config options ...]
```

**docs/troubleshooting.md:**
```markdown
# Troubleshooting

## Camera Not Found

**Error:** `camera /dev/video0 not found`

**Solution:**
1. Check available cameras: `ls /dev/video*`
2. Update device config: `percepta device add my-board --camera /dev/video1`
3. Check camera permissions: `sudo usermod -a -G video $USER`

## API Key Errors

**Error:** `ANTHROPIC_API_KEY not set`

**Solution:**
\`\`\`bash
export ANTHROPIC_API_KEY=sk-ant-...
# Or add to ~/.bashrc for persistence
\`\`\`

[... cover all common issues ...]
```

**docs/api-integration.md:**
```markdown
# API Integration

## MCP Server Mode (Coming Soon)

Percepta can run as an MCP server for Claude Desktop:

\`\`\`json
{
  "mcpServers": {
    "percepta": {
      "command": "percepta",
      "args": ["mcp"]
    }
  }
}
\`\`\`

## Direct API Usage

Use Percepta as a library:

\`\`\`go
import "github.com/Perceptax/percepta/pkg/percepta"

client := percepta.NewClient(config)
obs, err := client.Observe(deviceID)
result, err := client.Assert(deviceID, "led power is ON")
\`\`\`

[... API documentation ...]
```

**Update README.md:**

Rewrite README with:
- Clear value proposition
- Quick start (3 commands to first observation)
- Feature highlights
- Links to full docs
- Demo GIF or screenshot
- Badge for tests passing
- Installation instructions

AVOID: Documentation drift. Keep examples accurate and tested.
AVOID: Jargon. Write for embedded devs who may be new to AI tools.
  </action>
  <verify>All docs exist, comprehensive, accurate, well-formatted with examples</verify>
  <done>Comprehensive documentation suite ready, README polished, examples cover all workflows</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All error messages clear and actionable
- [ ] Progress spinners work for long operations
- [ ] Help text comprehensive with examples
- [ ] Edge cases handled gracefully
- [ ] Installation guide complete (Linux/macOS/Windows)
- [ ] Getting started tutorial works end-to-end
- [ ] Command reference documents all commands
- [ ] 20+ example workflows covering common use cases
- [ ] Configuration guide complete
- [ ] Troubleshooting guide covers common issues
- [ ] README.md polished and compelling
- [ ] All docs accurate and tested
</verification>

<success_criteria>

- CLI UX polished with clear errors, spinners, comprehensive help
- Error messages actionable with suggestions and docs links
- Edge cases handled gracefully
- Comprehensive documentation suite (installation, getting started, commands, examples, config, troubleshooting, API)
- README compelling with quick start
- All examples tested and accurate
- Ready for public users
- Plan 08-01 complete
  </success_criteria>

<output>
After completion, create `.planning/phases/08-public-launch/08-01-SUMMARY.md` following the summary.md template.

Include:
- UX improvements made (errors, spinners, help text)
- Documentation structure (7-8 doc files)
- Example workflow count (20+)
- Before/after examples of key improvements
- Integration readiness for 08-02 (marketing materials can reference docs)
- Note: Ready for public launch after marketing materials (08-02)
</output>
